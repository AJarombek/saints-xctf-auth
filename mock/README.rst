Overview
--------

A mocked implementation of the SaintsXCTF Auth API.  Used for testing other components of the SaintsXCTF application in
isolation.

Commands
--------

**Start the server locally**

.. code-block:: bash

    # setup virtual environment
    pipenv shell
    pipenv install
    flask --version

    # Create public and private keys
    ssh-keygen -q -t rsa -N '' -f jwt_rsa <<<y 2>&1 >/dev/null

    # Set environment variables
    export DB_ENV=local
    export FLASK_APP=main.py
    flask run

**Run the Docker container locally**

.. code-block:: bash

    # Build and start the container.
    docker container stop saints-xctf-auth-mock
    docker container rm saints-xctf-auth-mock
    docker image build \
        --build-arg ENV=local \
        -t saints-xctf-auth-mock:latest \
        --network=host .

    docker container run -d -p 5000:5000 --name saints-xctf-auth-mock saints-xctf-auth-mock:latest

    # Check the running container logs.
    docker container logs saints-xctf-auth-mock

Files
-----

+-----------------------------+----------------------------------------------------------------------------------------------+
| Filename                    | Description                                                                                  |
+=============================+==============================================================================================+
| ``Dockerfile``              | Dockerfile for running the mocked Auth API.                                                  |
+-----------------------------+----------------------------------------------------------------------------------------------+
| ``main.py``                 | Python script which configures a mock Auth API.                                              |
+-----------------------------+----------------------------------------------------------------------------------------------+
| ``User.py``                 | Python class representing a SaintsXCTF user.                                                 |
+-----------------------------+----------------------------------------------------------------------------------------------+
| ``Pipfile``                 | Dependencies and virtual environment configuration for the Python mock Auth API.             |
+-----------------------------+----------------------------------------------------------------------------------------------+
| ``Pipfile.lock``            | Versions of dependencies to install with the application.  Generated by ``pipenv``.          |
+-----------------------------+----------------------------------------------------------------------------------------------+
| ``uwsgi.ini``               | ``uwsgi`` application server for the mocked Auth API.                                        |
+-----------------------------+----------------------------------------------------------------------------------------------+